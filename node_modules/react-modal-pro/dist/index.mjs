import{useRef as e,useEffect as r,createContext as n,useState as t,useContext as o,forwardRef as l,Fragment as a,createElement as s}from"react";import{jsx as d,jsxs as i}from"react/jsx-runtime";import{createPortal as c}from"react-dom";const m=e=>{const r=window.location.hash;return{isAlreadyInHash:r.split("#").some((r=>r===e)),currentHash:r}},u=n(void 0),h=({children:e})=>{const r=JSON.parse(JSON.stringify({open:!1,willBeClosed:!1})),[n,o]=t({});return d(u.Provider,{value:{modals:n,setModal:e=>{o((n=>Object.assign(Object.assign({},n),{[e]:r})))},setOpen:(e,r)=>{o((n=>Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{open:r})})))},setWillBeClosed:(e,r)=>{o((n=>Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{willBeClosed:r})})))},removeModal:e=>{o((n=>{const t=Object.assign({},n);return t[e]&&(t[e]=r),t}))},initialModal:r},children:e})},p=()=>{const e=o(u);if(!e)throw new Error("useModals must be used within a ModalsProvider");return e},_=n(null),y=({children:e})=>{const[n,o]=t(window.location.pathname+window.location.hash),l=()=>o(window.location.pathname+window.location.hash);r((()=>{const e=window.history.pushState;window.history.pushState=function(...r){e.apply(window.history,r);const n=window.location.pathname+window.location.hash;o(n)}}),[]),r((()=>(window.addEventListener("popstate",l),window.addEventListener("hashchange",l),()=>{window.removeEventListener("",l),window.removeEventListener("hashchange",l)})),[]);return d(_.Provider,{value:{path:n,navigate:e=>{window.history.pushState({},"",e)}},children:e})},b=()=>{const e=o(_);if(!e)throw new Error("useRouter must be used within a RouterProvider");return e},f=n(void 0),g=e=>{const{children:r,defaultBackdropClassName:n,defaultCanDismiss:t,defaultCloseDuration:o,defaultOpenDuration:l,defaultSheetClassName:a}=e,s={canDismiss:null==t||t,openDuration:null!=l?l:400,closeDuration:null!=o?o:300,sheetClassName:null!=a?a:"",backdropClassName:null!=n?n:""},{openDuration:i,closeDuration:c,sheetClassName:m,backdropClassName:u,canDismiss:h}=s;return d(f.Provider,{value:{openDuration:i,closeDuration:c,sheetClassName:m,backdropClassName:u,canDismiss:h},children:r})},v=n=>{const{modalKey:l,swipeThreshold:a,swipeToClose:s=!1,swipeToOpen:d=!1,sidebarDirection:i,backdropClassName:c,sheetClassName:u,canDismiss:h,openDuration:_,closeDuration:y,sheetRef:g,closeCb:v}=n,w=l.replaceAll(" ",""),{backdropClassName:k,canDismiss:O,closeDuration:x,openDuration:M,sheetClassName:C}=(()=>{const e=o(f);if(!e)throw new Error("useModalDefaults must be used within a ModalDefaultsProvider");return e})(),{open:E,willBeClosed:D,handleOpenModal:S,handleCloseModal:$}=(({key:e,closeCb:n,canDismiss:t,closeDuration:o})=>{var l;const a=`#${e}`,{navigate:s,path:d}=b(),{modals:i,setModal:c,setOpen:u,setWillBeClosed:h,removeModal:_,initialModal:y}=p(),f=null!==(l=i[e])&&void 0!==l?l:y,{willBeClosed:g}=f;return r((()=>{i[e]||c(e)}),[e,d]),r((()=>{const{isAlreadyInHash:r}=m(e);u(e,r),!r&&g&&h(e,!1)}),[e,d]),r((()=>{g&&setTimeout((()=>{const{isAlreadyInHash:r}=m(e);r?window.history.back():_(e),n&&n()}),o-50)}),[e,g]),Object.assign(Object.assign({},f),{handleOpenModal:()=>{const{isAlreadyInHash:r,currentHash:n}=m(e);r||s(n+a)},handleCloseModal:()=>{t&&h(e,!0)}})})({key:w,closeCb:v,canDismiss:null!=h?h:O,closeDuration:null!=y?y:x}),{isNearStart:N,isNearEnd:H}=(({ref:e,offset:n=100,key:o})=>{const[l,a]=t(!1),[s,d]=t(!0);return r((()=>{if(!e||!(null==e?void 0:e.current))return;const r=()=>{const r=e.current;if(!r)return;const{scrollTop:t,scrollHeight:o,clientHeight:l}=r,s=o-(t+l);d(t<=n),a(s<=n)},t=e.current;return t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r)}}),[e,n,o]),{isNearEnd:l,isNearStart:s}})({key:w,ref:E?g:void 0}),j=s?"bottom"===i&&N||"top"===i&&H||"left"===i||"right"===i:d,K="left"===i||"right"===i?"horizontal":"vertical",T={onSwipeUp:()=>"top"===i&&s?$():"bottom"===i&&d?S():void 0,onSwipeDown:()=>"top"===i&&d?S():"bottom"===i&&s?$():void 0,onSwipeRight:()=>"left"===i&&d?S():"right"===i&&s?$():void 0,onSwipeLeft:()=>"right"===i&&d?S():"left"===i&&s?$():void 0};return(({direction:n,onSwipeUp:t,onSwipeDown:o,onSwipeLeft:l,onSwipeRight:a,threshold:s=100,enabled:d=!0,key:i})=>{const c=e(null),m=e({x:0,y:0}),u=e=>{c.current={x:e.touches[0].clientX,y:e.touches[0].clientY},m.current={x:0,y:0}},h=e=>{if(!c.current)return;const r=e.touches[0].clientX,n=e.touches[0].clientY,t=r-c.current.x,o=n-c.current.y;m.current={x:t,y:o}},p=()=>{if(!c.current)return;const{x:e,y:r}=m.current,d=Math.abs(e),i=Math.abs(r);({vertical:()=>{i>s&&(r>0&&o?o():t&&t())},horizontal:()=>{d>s&&(e>0&&a?a():l&&l())}})[n](),c.current=null,m.current={x:0,y:0}};r((()=>{if(d)return window.addEventListener("touchstart",u),window.addEventListener("touchmove",h),window.addEventListener("touchend",p),()=>{window.removeEventListener("touchstart",u),window.removeEventListener("touchmove",h),window.removeEventListener("touchend",p)}}),[d,i])})(Object.assign(Object.assign({},T),{key:w,enabled:j,threshold:a,direction:K})),{currentModalKey:w,backdropClassName:null!=c?c:k,canDismiss:null!=h?h:O,closeDuration:null!=y?y:x,openDuration:null!=_?_:M,sheetClassName:null!=u?u:C,handleOpenModal:S,handleCloseModal:$,open:E,willBeClosed:D}},w=e=>{const{removeModal:n}=p();r((()=>()=>{n(e)}),[])},k=e=>{var r;const{navigate:n}=b(),{modals:t,setWillBeClosed:o,initialModal:l}=p(),a=e.replaceAll(" ",""),s=null!==(r=t[e])&&void 0!==r?r:l;return{open:s.open,willBeClosed:s.willBeClosed,handleOpenModal:()=>{const{isAlreadyInHash:e,currentHash:r}=m(a);e||n(r+`#${a}`)},handleCloseModal:()=>{o(a,!0)}}},O=e=>{r((()=>{if(e)return document.body.style.overflow="hidden",document.body.style.overscrollBehavior="none",()=>{document.body.style.overflow="auto",document.body.style.overscrollBehavior="initial"}}),[e])};function x(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]])}return n}function M(e,r){void 0===r&&(r={});var n=r.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}"function"==typeof SuppressedError&&SuppressedError;var C="style-module_backdrop__DzrB2",E="style-module_sheet__wQbZT";M(".style-module_backdrop__DzrB2 {\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    position: fixed;\r\n    background: var(--react-modal-pro-backdrop-background);\r\n    z-index: var(--react-modal-pro-dialog-backdrop-z-index);\r\n}\r\n\r\n.style-module_sheet__wQbZT {\r\n    top: 50%;\r\n    left: 50%;\r\n    opacity: 1;\r\n    position: fixed;\r\n    transform: translate(-50%, -50%);\r\n    padding: var(--react-modal-pro-sheet-padding);\r\n    border-radius: var(--react-modal-pro-sheet-radius);\r\n    background: var(--react-modal-pro-sheet-background);\r\n    z-index: var(--react-modal-pro-dialog-sheet-z-index);\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n    .style-module_sheet__wQbZT {\r\n        min-width: 80%;\r\n        min-height: 200px;\r\n    }\r\n}\r\n\r\n@media only screen and (min-width: 601px) {\r\n    .style-module_sheet__wQbZT {\r\n        min-width: 400px;\r\n        min-height: 250px;\r\n    }\r\n}");var D="keyframes-module_dialog-fade-in__6i5xd",S="keyframes-module_dialog-fade-out__xvk5y",$="keyframes-module_slide-bottom-in__aWYhS",N="keyframes-module_slide-bottom-out__NrGWt",H="keyframes-module_slide-top-in__S1svl",j="keyframes-module_slide-top-out__3-brR",K="keyframes-module_slide-left-in__IRMHx",T="keyframes-module_slide-left-out__MQecc",z="keyframes-module_slide-right-in__twq0Z",B="keyframes-module_slide-right-out__-Py7X";M("@keyframes keyframes-module_dialog-fade-in__6i5xd {\r\n    0% {\r\n        opacity: 0;\r\n    }\r\n\r\n    100% {\r\n        opacity: initial;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_dialog-fade-out__xvk5y {\r\n    0% {\r\n        opacity: initial;\r\n    }\r\n\r\n    100% {\r\n        opacity: 0;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-bottom-in__aWYhS {\r\n    0% {\r\n        bottom: -100%;\r\n    }\r\n\r\n    100% {\r\n        bottom: 0;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-bottom-out__NrGWt {\r\n    0% {\r\n        bottom: 0;\r\n    }\r\n\r\n    100% {\r\n        bottom: -100%;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-top-in__S1svl {\r\n    0% {\r\n        top: -100%;\r\n    }\r\n\r\n    100% {\r\n        top: 0;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-top-out__3-brR {\r\n    0% {\r\n        top: 0;\r\n    }\r\n\r\n    100% {\r\n        top: -100%;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-left-in__IRMHx {\r\n    0% {\r\n        left: -100%;\r\n    }\r\n\r\n    100% {\r\n        left: 0;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-left-out__MQecc {\r\n    0% {\r\n        left: 0;\r\n    }\r\n\r\n    100% {\r\n        left: -100%;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-right-in__twq0Z {\r\n    0% {\r\n        right: -100%;\r\n    }\r\n\r\n    100% {\r\n        right: 0;\r\n    }\r\n}\r\n\r\n@keyframes keyframes-module_slide-right-out__-Py7X {\r\n    0% {\r\n        right: 0;\r\n    }\r\n\r\n    100% {\r\n        right: -100%;\r\n    }\r\n}");const L=l(((e,r)=>{const{open:n,openDuration:t,willBeClosed:o,handleClose:l,closeDuration:s,children:m,sheetClassName:u="",backdropClassName:h=""}=e,p={backdrop:{false:`${D} ${t}ms`,true:`${S} ${s}ms`},sheet:{false:`${D} ${t}ms`,true:`${S} ${s}ms`}};return n?c(i(a,{children:[d("div",{onClick:l,className:`${C} ${h}`,style:{animation:p.backdrop[`${o}`]}}),d("div",{ref:r,className:`${E} ${u}`,style:{animation:p.sheet[`${o}`]},children:m})]}),document.getElementById("pro-modal-root")):null}));L.displayName="dialog";const R=r=>{var{TriggerElement:n,children:t}=r,o=x(r,["TriggerElement","children"]);const l=e(null),c=v(Object.assign(Object.assign({},o),{sheetRef:l})),{handleOpenModal:m,handleCloseModal:u,currentModalKey:h}=c,p=x(c,["handleOpenModal","handleCloseModal","currentModalKey"]);return w(o.modalKey),O(p.open),i(a,{children:[d("div",{className:"modal_pro_trigger_element",onClick:m,children:n}),s(L,Object.assign({},p,{key:h,handleClose:u,ref:l}),t)]})};var I={backdrop:"style-module_backdrop__HHTDx",sheet:"style-module_sheet__SMOKH",sidebar:"style-module_sidebar__4qYdu",prosheet:"style-module_prosheet__NU4O5",bottom:"style-module_bottom__E2hqc",top:"style-module_top__1dEkG",left:"style-module_left__eyrET",right:"style-module_right__Qur9w"};M(".style-module_backdrop__HHTDx {\r\n  top: 0;\r\n  left: 0;\r\n  width: 100svw;\r\n  height: 100svh;\r\n  position: fixed;\r\n  opacity: 1;\r\n  background: var(--react-modal-pro-backdrop-background);\r\n}\r\n\r\n.style-module_sheet__SMOKH {\r\n  position: fixed;\r\n  opacity: 1;\r\n  background: var(--react-modal-pro-sheet-background);\r\n  padding: var(--react-modal-pro-sheet-padding);\r\n  overflow-y: auto;\r\n}\r\n\r\n.style-module_backdrop__HHTDx.style-module_sidebar__4qYdu {\r\n  z-index: var(--react-modal-pro-sidebar-backdrop-z-index);\r\n}\r\n\r\n.style-module_backdrop__HHTDx.style-module_prosheet__NU4O5 {\r\n  z-index: var(--react-modal-pro-pro-sheet-backdrop-z-index);\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_sidebar__4qYdu {\r\n  z-index: var(--react-modal-pro-sidebar-sheet-z-index);\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_prosheet__NU4O5 {\r\n  z-index: var(--react-modal-pro-pro-sheet-sheet-z-index);\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_bottom__E2hqc {\r\n  left: 50%;\r\n  bottom: 0;\r\n  border-top-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-top-left-radius: var(--react-modal-pro-sheet-radius);\r\n  transform: translateX(-50%);\r\n  max-height: 80vh;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n  left: 50%;\r\n  top: 0;\r\n  border-bottom-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-left-radius: var(--react-modal-pro-sheet-radius);\r\n  transform: translateX(-50%);\r\n  max-height: 80vh;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_left__eyrET {\r\n  bottom: 0;\r\n  left: 0;\r\n  border-top-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-right-radius: var(--react-modal-pro-sheet-radius);\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n  top: 0;\r\n  right: 0;\r\n  border-top-left-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-left-radius: var(--react-modal-pro-sheet-radius);\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n\r\n  .style-module_sheet__SMOKH.style-module_bottom__E2hqc,\r\n  .style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n    width: 100vw;\r\n    max-width: calc(100% - 24px);\r\n    min-height: 458px;\r\n  }\r\n\r\n  .style-module_sheet__SMOKH.style-module_left__eyrET,\r\n  .style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n    min-width: 33%;\r\n    max-width: calc(100% - 24px);\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 601px) {\r\n\r\n  .style-module_sheet__SMOKH.style-module_bottom__E2hqc,\r\n  .style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n    min-width: 580px;\r\n    min-height: 458px;\r\n  }\r\n\r\n  .style-module_sheet__SMOKH.style-module_left__eyrET,\r\n  .style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n    min-width: 33%;\r\n  }\r\n}");const P=l(((e,r)=>{const{open:n,openDuration:t,willBeClosed:o,handleClose:l,closeDuration:s,children:m,sheetClassName:u,backdropClassName:h,direction:p,mode:_}=e,y={bottom:{open:`${$}`,close:`${N}`},top:{open:`${H}`,close:`${j}`},left:{open:`${K}`,close:`${T}`},right:{open:`${z}`,close:`${B}`}},b={backdrop:{false:`${D} ${t}ms`,true:`${S} ${s}ms`},sheet:{false:`${y[p].open} ${t}ms`,true:`${y[p].close} ${s}ms`}};return n?c(i(a,{children:[d("div",{onClick:l,className:`${I.backdrop} ${I[_]} ${h}`,style:{animation:b.backdrop[`${o}`]}}),d("div",{ref:r,className:`${I.sheet} ${I[_]} ${I[p]} ${u}`,style:{animation:b.sheet[`${o}`]},children:m})]}),document.getElementById("pro-modal-root")):null}));P.displayName="drawer";const Q=r=>{var{direction:n}=r,t=x(r,["direction"]);const o=e(null),l=v(Object.assign(Object.assign({sheetRef:o},t),{sidebarDirection:n})),{handleOpenModal:c,handleCloseModal:m,currentModalKey:u}=l,h=x(l,["handleOpenModal","handleCloseModal","currentModalKey"]);return O(h.open),w(t.modalKey),i(a,{children:[d("div",{className:"modal_pro_trigger_element",onClick:()=>c(),children:t.TriggerElement}),s(P,Object.assign({},h,{mode:"sidebar",key:u,direction:n,handleClose:m,ref:o}),t.children)]})},q=r=>{var{TriggerElement:n,direction:t,children:o}=r,l=x(r,["TriggerElement","direction","children"]);const c=e(null),m=v(Object.assign(Object.assign({},l),{sheetRef:c,sidebarDirection:t})),{handleOpenModal:u,handleCloseModal:h,currentModalKey:p}=m,_=x(m,["handleOpenModal","handleCloseModal","currentModalKey"]);return w(l.modalKey),O(_.open),i(a,{children:[d("div",{className:"modal_pro_trigger_element",onClick:u,children:n}),s(P,Object.assign({},_,{mode:"prosheet",direction:t,key:p,handleClose:h,ref:c}),o)]})};M(":root {\r\n  --react-modal-pro-sheet-radius: 12px;\r\n  --react-modal-pro-sheet-padding: 24px;\r\n  --react-modal-pro-sheet-background: #ffffff;\r\n  --react-modal-pro-backdrop-background: #0000004a;\r\n  --react-modal-pro-dialog-sheet-z-index: 1200;\r\n  --react-modal-pro-dialog-backdrop-z-index: 1199;\r\n  --react-modal-pro-sidebar-sheet-z-index: 1000;\r\n  --react-modal-pro-sidebar-backdrop-z-index: 999;\r\n  --react-modal-pro-pro-sheet-sheet-z-index: 1100;\r\n  --react-modal-pro-pro-sheet-backdrop-z-index: 1099;\r\n}\r\n\r\nhtml {\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}");const A=e=>{var{children:n}=e,t=x(e,["children"]);return r((()=>{if(!document.getElementById("pro-modal-root")){const e=document.createElement("div");e.setAttribute("id","pro-modal-root"),document.body.append(e)}}),[]),d(g,Object.assign({},t,{children:d(y,{children:d(h,{children:n})})}))};export{R as Dialog,A as ProModalProvider,q as ProSheet,Q as Sidebar,k as useModalController};
//# sourceMappingURL=index.mjs.map
